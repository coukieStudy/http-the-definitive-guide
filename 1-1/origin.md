# 1장 HTTP 개관

## 1.1 HTTP: 인터넷의 멀티미디어 배달부

- HTTP(Hypertext Transfer Protocol)는 웹브라우저, 서버, 웹 애플리케이션 모두 사용하는 인터넷의 공용어
- 이때 신뢰성있는 데이터 전송 프로토콜을 사용: 개발자는 데이터의 손상에 대한 걱정없이 애플리케이션 고유 기능 구현에 집중 가능

<br>

## 1.2 웹 클라이언트와 서버

- WWW(world wide web)의 기본요소
- HTTP 서버: 인터넷의 데이터를 저장/ 클라이언트가 요청한 데이터 제공

- HTTP 클라이언트: 서버에 HTTP 요청

<br>

## 1.3 리소스

**웹 리소스**

- 웹 콘텐츠의 원천
- 정적, 동적 리소스 모두 포함
- 웹서버가 관리, 제공

### 1.3.1 미디어 타입 (MIME)

- HTTP는 수천 개의 데이터 타입을 다루기 때문에  웹에서 전송되는 객체 각각에 **MIME (Multipurpose Internet Mail Extensions, 다목적 인터넷 메일 확장)** 타입이라는 데이터 포맷 라벨을 붙인다.
- 웹서버는 데이터 콘테츠와 함께 MIME(데이터 타입)을 보낸다.
- 웹 브라우저는 서버로부터 객체를 돌려받을 때 MIME을 통해서 다룰 수 있는 객체인지 확인한다.
- 표현 형식: `주 타입/부 타입`
  - HTML: `text/html`
  - JPEG: `image/jpeg`
- https://blog.naver.com/writer0713/221853596497
- MIME은 Content-Type과 Accept 헤더에서 널리 사용됨.
  - Content-Type: HTTP 메시지(요청과 응답 모두)에 담겨 보내는 데이터의 형식을 알려주는 헤더이다.
  - Accept: 클라이언트가 이해 가능한 컨텐츠 타입이 무엇인지를 알려줍니다. 브라우저(클라이언트) 에서 웹서버로 요청시 요청메시지에 담기는 헤더이다. 
  - **Content-Type 헤더와 Accept 헤더 둘 다 데이터 타입(MIME)을 다루는 헤더이다. 하지만** **Content-Type 헤더는 현재 전송하는 데이터가 어떤 타입인지에 대한 설명을 하는 개념이고** **Accept 헤더는 클라이언트가 서버에게 어떤 특정한 데이터 타입을 보낼때** **클라이언트가 보낸 특정 데이터 타입으로만 응답을 해야한다.** 

### 1.3.2 URI

- URI: 통합 자원 식별자(Uniform Resource Idenrifier)
  - 웹 서버 리소스의 이름
  - URI에는 URL과 URN이 있다.

### 1.3.3 URL

- URL: 통합 자원 지시자 (Uniform Resource Locator)
  - 특정 서버의 한 리소스에 대한 구체적 위치 서술
  - 오늘날 대부분의 URI는 URL이다.
  - 표현 형식:`스킴(HTTP 프로토콜) + 서버의 인터넷 주소 + 웹 서버의 리소스`
  - ex) https://github.com/coukieStudy/http-the-definitive-guide
    - https://
    - github.com
    - coukieStudy/http-the-definitive-guide

### 1.3.4 URN

- URN: 유니폼 리소스 이름 (Uniform Resource Name)
  - 리소스의 위치에 영향을 받지 않는 유일무이한 이름 역할
  - 리소스의 위치를 바꾸더라도 동작
  - 표현 형식: `"urn:" <NID> ":" <NSS>` where <NID> is the Namespace Identifier, and <NSS> is the Namespace Specific String.
  - ex) `urn:isbn:0451450523` to identify a book by its ISBN number

<br>

## 1.4 트랜잭션

- HTTP 트랜잭션은 클라이언트의 요청 명령과 서버의 응답 결과로 구성
- 이 상호작용은 HTTP 메시지를 통해 이루어짐
- 웹페이지는 여러 객체로 이루어질 수 있다. 

### 1.4.1 메서드

- 서버에게 어떤 동작이 취해져야 하는지 말해준다.

- 모든 요청 메세지는 한개의 메서드를 갖는다.

| 주요 HTTP 메서드 | 설명                                                         |
| :--------------: | :----------------------------------------------------------- |
|       GET        | 서버에서 클라이언트로 지정한 리소스를 보내라                 |
|       PUT        | 클라이언트에서 서버로 보낸 데이터를 지정한 이름의 리소스로 저장하라 |
|      DELETE      | 지정한 리소스를 삭제해라                                     |
|       POST       | 클라이언트 데이터를 서버 게이트웨이 애플리케이션으로 보내라  |
|       HEAD       | 지정한 리소스에 대한 응답에서 HTTP 헤더 부분만 보내라        |

### 1.4.2 상태코드

- 모든 HTTP 응답 메시지는 상태 코드와 함께 반환

| 주요 HTTP 상태 코드 | 설명                                          |
| :-----------------: | :-------------------------------------------- |
|         200         | 성공                                          |
|         302         | 다시 보내라. 다른 곳에 가서 리소스를 가져가라 |
|         404         | 없음. 리소스를 찾을 수 없다.                  |

<br>

## 1.5 메시지

<img src="https://mdn.mozillademos.org/files/13827/HTTPMsgStructure2.png" alt="Requests and responses share a common structure in HTTP" style="zoom:67%;" />

- 단순한 줄단위 문자열
- 요청 메시지, 응답 메시지 두 종류
- 구조: `시작줄 + 헤더 + 본문`
  - 시작줄
    - 요청 및 응답에 대한 내용
  - 헤더
    - 쌍점(:)으로 구분되어 있는 하나의 이름과 하나의 값으로 구성
    - 0개 이상의 헤더 필드로 구성
    - 헤더는 빈 줄로 끝남
  - 본문
    - 어떤 종류의 데이터든 들어갈 수 있는 메시지 본문
    - 시작줄, 헤더와 달리 임의의 이진 데이터 포함 가능 (이미지, 비디오, 오디오, 텍스트 등)

<br>

## 1.6 TCP 커넥션

HTTP는 애플리케이션 계층 프로토콜이다. HTTP는 네트워크 통신의 핵심적인 세부사항에 대해 신경 쓰지 않고 그것은 TCP/IP에 맡긴다.

### 1.6.1 TCP/IP

- **TCP** (Transmission Control Protocol, 전송 제어 프로토콜) 
  - 오류 없는 데이터 전송
  - 순서에 맞는 전달 (언제나 보낸 순서대로 도착)
  - 조각나지 않는 데이터 스트림 (언제나 어떤 크기로든 전송 가능)
- **TCP/IP**
  - TCP와 IP가 층을 이루는 패킷 교환 네트워크 프로토콜의 집합
  - 각 네트워크와 하드웨어의 특성을 숨기고, 어떤 종류의 컴퓨터/네트워크든 서로 신뢰성 있는 의사소통을 가능하게 함
  - 일단 TCP 커넥션이 맺어지면, 클라이언트와 서버 간의 HTTP 메시지가 없어지거나, 손상되거나, 순서가 바뀌어 수신되는 일은 결코 없다.

<img src="https://blogfiles.pstatic.net/20110719_23/netrance_1311021005755bTs3B_PNG/Protocol_Stack.png" alt="img" style="zoom:70%;" />

### 1.6.2 접속, IP 주소 그리고 포트번호

- HTTP 메시지 전송시 **IP (Internet Protocol, 인터넷 프로토콜)** 주소와 포트번호를 사용해 클라이언트와 서버 사이에 TCP/IP 커넥션을 맺어야 함
- ex) http://207.200.83.29:80/index.html

- IP 주소는 숫자로 구성되어 있으나, IP 주소의 별명과도 같은 호스트명으로 표현되어 있어도 도메인 이름 서비스(Domain Name Service, DNS)라 불리는 장치를 통해 쉽게 IP 주소로 다시 변환이 가능
- 포트번호가 없을 경우 기본값 80
- **클라이언트와 서버 사이의 통신 순서**
  1. 웹브라우저는 서버의 URL에서 호스트 명을 추출
  2. 웹브라우저는 서버의 호스트 명을 IP로 변환 
  3. 웹브라우저는 포트번호 추출 
  4. 웹브라우저는 웹 서버와 TCP 커넥션 맺음
  5. 웹브라우저는 서버에 HTTP 요청을 보냄
  6. 서버는 웹브라우저에 HTTP 응답을 돌려줌
  7. 커넥션이 닫히면 웹브라우저는 문서(응답)를 보여줌

<br>

## 1.7 프로토콜 버전

- HTTP/1.0: 처음으로 널리 쓰이기 시작한 HTTP 버전
- HTTP/1.1: HTTP 설계의 구조적 결함 교정, 성능 최적화, 잘못된 기능 제거에 집중한 현재의 HTTP 버전
- HTTP/2.0: 성능 개선을 위해 설계가 진행 중인 프로토콜(19장)

<br>

## 1.8 웹의 구성요소

### 1.8.1 프락시(6장)

- 클라이언트와 서버 사이 HTTP 중개자
- 중간에서 트래픽을 전달
- 주로 보안을 위해 사용
- 요청과 응답 필터링
- ex) 바이러스 검출, 성인 컨텐츠 차단

### 1.8.2 캐시(7장)

- 많이 찾는 웹페이지를 클라이언트 가까이에 보관하는 HTTP 창고
- 성능 향상을 위해 사용

### 1.8.3 게이트웨이(8장)

- 다른 애플리케이션과 연결된 특별한 웹 서버
- 주로 HTTP 트래픽을 다른 프로토콜로 변환하는데 사용

### 1.8.4 터널

- 단순히 raw 데이터를 열어보지 않고  그대로 전달하기만 하는 특별한 프락시

### 1.8.5 에이전트(9장)

- 자동화된 HTTP 요청을 만드는 준지능적(semi-intelligent) 웹클라이언트
- ex) 웹 브라우저, 스파이더, 웹로봇 등
